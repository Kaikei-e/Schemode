(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9861)}])},9861:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return z}});var l=t(5893),i=t(532),r=t(2321),o=t(3058),a=t(7294),s=t(6554),d=t(6914),c=(0,s.G)(function(e,n){let{direction:t,align:i,justify:r,wrap:o,basis:a,grow:s,shrink:c,...u}=e;return(0,l.jsx)(d.m.div,{ref:n,__css:{display:"flex",flexDirection:t,alignItems:i,justifyContent:r,flexWrap:o,flexBasis:a,flexGrow:s,flexShrink:c},...u})});c.displayName="Flex";var u=t(7030),m=t(3179),h=t(5432),x=(0,s.G)(function(e,n){let t=(0,u.mq)("Heading",e),{className:i,...r}=(0,m.Lr)(e);return(0,l.jsx)(d.m.h2,{ref:n,className:(0,h.cx)("chakra-heading",e.className),...r,__css:t})});x.displayName="Heading";var f=t(5227),[p,j]=(0,f.k)({strict:!1,name:"ButtonGroupContext"});function g(e){let{children:n,className:t,...i}=e,r=(0,a.isValidElement)(n)?(0,a.cloneElement)(n,{"aria-hidden":!0,focusable:!1}):n,o=(0,h.cx)("chakra-button__icon",t);return(0,l.jsx)(d.m.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:o,children:r})}g.displayName="ButtonIcon";var b=t(1136);function v(e){let{label:n,placement:t,spacing:i="0.5rem",children:r=(0,l.jsx)(b.$,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:s,...c}=e,u=(0,h.cx)("chakra-button__spinner",o),m="start"===t?"marginEnd":"marginStart",x=(0,a.useMemo)(()=>({display:"flex",alignItems:"center",position:n?"relative":"absolute",[m]:n?i:0,fontSize:"1em",lineHeight:"normal",...s}),[s,n,m,i]);return(0,l.jsx)(d.m.div,{className:u,...c,__css:x,children:r})}function y(...e){return n=>{e.forEach(e=>{!function(e,n){if(null!=e){if("function"==typeof e){e(n);return}try{e.current=n}catch(t){throw Error(`Cannot assign value '${n}' to ref '${e}'`)}}}(e,n)})}}v.displayName="ButtonSpinner";var w=(0,s.G)((e,n)=>{let t=j(),i=(0,u.mq)("Button",{...t,...e}),{isDisabled:r=null==t?void 0:t.isDisabled,isLoading:o,isActive:s,children:c,leftIcon:x,rightIcon:f,loadingText:p,iconSpacing:g="0.5rem",type:b,spinner:w,spinnerPlacement:C="start",className:_,as:k,...N}=(0,m.Lr)(e),M=(0,a.useMemo)(()=>{let e={...null==i?void 0:i._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...i,...!!t&&{_focus:e}}},[i,t]),{ref:T,type:B}=function(e){let[n,t]=(0,a.useState)(!e);return{ref:(0,a.useCallback)(e=>{e&&t("BUTTON"===e.tagName)},[]),type:n?"button":void 0}}(k),D={rightIcon:f,leftIcon:x,iconSpacing:g,children:c};return(0,l.jsxs)(d.m.button,{ref:function(...e){return(0,a.useMemo)(()=>y(...e),e)}(n,T),as:k,type:null!=b?b:B,"data-active":(0,h.PB)(s),"data-loading":(0,h.PB)(o),__css:M,className:(0,h.cx)("chakra-button",_),...N,disabled:r||o,children:[o&&"start"===C&&(0,l.jsx)(v,{className:"chakra-button__spinner--start",label:p,placement:"start",spacing:g,children:w}),o?p||(0,l.jsx)(d.m.span,{opacity:0,children:(0,l.jsx)(S,{...D})}):(0,l.jsx)(S,{...D}),o&&"end"===C&&(0,l.jsx)(v,{className:"chakra-button__spinner--end",label:p,placement:"end",spacing:g,children:w})]})});function S(e){let{leftIcon:n,rightIcon:t,children:i,iconSpacing:r}=e;return(0,l.jsxs)(l.Fragment,{children:[n&&(0,l.jsx)(g,{marginEnd:r,children:n}),i,t&&(0,l.jsx)(g,{marginStart:r,children:t})]})}w.displayName="Button";var C=(0,d.m)("div");C.displayName="Box";var _=(0,s.G)(function(e,n){let{size:t,centerContent:i=!0,...r}=e;return(0,l.jsx)(C,{ref:n,boxSize:t,__css:{...i?{display:"flex",alignItems:"center",justifyContent:"center"}:{},flexShrink:0,flexGrow:0},...r})});_.displayName="Square",(0,s.G)(function(e,n){let{size:t,...i}=e;return(0,l.jsx)(_,{size:t,ref:n,borderRadius:"9999px",...i})}).displayName="Circle";var k=(0,s.G)(function(e,n){let t=(0,u.mq)("Text",e),{className:i,align:r,decoration:o,casing:a,...s}=(0,m.Lr)(e),c=function(e){let n=Object.assign({},e);for(let e in n)void 0===n[e]&&delete n[e];return n}({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,l.jsx)(d.m.p,{ref:n,className:(0,h.cx)("chakra-text",e.className),...c,...s,__css:t})});k.displayName="Text";var N=e=>e.isTheMode?(0,l.jsx)(b.$,{margin:2,thickness:"4px",speed:"2.5s",emptyColor:"gray.200",color:"blue.500",size:"md"}):(0,l.jsx)("div",{});let M=["Healthy Adult Mode","Vulnerable Child Mode","Dysfunctional Parent Mode"];var T=e=>(0,l.jsxs)(x,{fontSize:"x-large",textAlign:"center",fontStyle:"normal",fontWeight:"medium",m:"5",children:["Now, you're :"," ",M[e.mode]]}),B=t(4480);let D=(0,B.cn)({key:"opinionState",default:[]}),R=(0,B.cn)({key:"count",default:0});var F=e=>{let[n,t]=(0,B.FV)(D);return(0,l.jsx)(C,{borderRadius:"xl",w:"fit-content",h:"fit-content",m:5,padding:"2",children:(0,l.jsx)("ul",{children:(0,l.jsx)(c,{flexDir:"column-reverse",children:n.map(n=>{if(n.mode===e.whichMode)return(0,l.jsx)("li",{children:n.text},n.id)})})})})},[I,P]=(0,f.k)({name:"FormControlStylesContext",errorMessage:"useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormControl />\" "}),[O,q]=(0,f.k)({strict:!1,name:"FormControlContext"});(0,s.G)(function(e,n){let t=(0,u.jC)("Form",e),{getRootProps:i,htmlProps:r,...o}=function(e){let{id:n,isRequired:t,isInvalid:l,isDisabled:i,isReadOnly:r,...o}=e,s=(0,a.useId)(),d=n||`field-${s}`,c=`${d}-label`,u=`${d}-feedback`,m=`${d}-helptext`,[x,f]=(0,a.useState)(!1),[p,j]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!1),v=(0,a.useCallback)((e={},n=null)=>({id:m,...e,ref:y(n,e=>{e&&j(!0)})}),[m]),w=(0,a.useCallback)((e={},n=null)=>({...e,ref:n,"data-focus":(0,h.PB)(g),"data-disabled":(0,h.PB)(i),"data-invalid":(0,h.PB)(l),"data-readonly":(0,h.PB)(r),id:void 0!==e.id?e.id:c,htmlFor:void 0!==e.htmlFor?e.htmlFor:d}),[d,i,g,l,r,c]),S=(0,a.useCallback)((e={},n=null)=>({id:u,...e,ref:y(n,e=>{e&&f(!0)}),"aria-live":"polite"}),[u]),C=(0,a.useCallback)((e={},n=null)=>({...e,...o,ref:n,role:"group","data-focus":(0,h.PB)(g),"data-disabled":(0,h.PB)(i),"data-invalid":(0,h.PB)(l),"data-readonly":(0,h.PB)(r)}),[o,i,g,l,r]);return{isRequired:!!t,isInvalid:!!l,isReadOnly:!!r,isDisabled:!!i,isFocused:!!g,onFocus:()=>b(!0),onBlur:()=>b(!1),hasFeedbackText:x,setHasFeedbackText:f,hasHelpText:p,setHasHelpText:j,id:d,labelId:c,feedbackId:u,helpTextId:m,htmlProps:o,getHelpTextProps:v,getErrorMessageProps:S,getRootProps:C,getLabelProps:w,getRequiredIndicatorProps:(0,a.useCallback)((e={},n=null)=>({...e,ref:n,role:"presentation","aria-hidden":!0,children:e.children||"*"}),[])}}((0,m.Lr)(e)),s=(0,h.cx)("chakra-form-control",e.className);return(0,l.jsx)(O,{value:o,children:(0,l.jsx)(I,{value:t,children:(0,l.jsx)(d.m.div,{...i({},n),className:s,__css:t.container})})})}).displayName="FormControl",(0,s.G)(function(e,n){let t=q(),i=P(),r=(0,h.cx)("chakra-form__helper-text",e.className);return(0,l.jsx)(d.m.div,{...null==t?void 0:t.getHelpTextProps(e,n),__css:i.helperText,className:r})}).displayName="FormHelperText";var E=["h","minH","height","minHeight"],G=(0,s.G)((e,n)=>{let t=(0,u.mq)("Textarea",e),{className:i,rows:r,...o}=(0,m.Lr)(e),a=function(e){let{isDisabled:n,isInvalid:t,isReadOnly:l,isRequired:i,...r}=function(e){var n,t,l;let i=q(),{id:r,disabled:o,readOnly:a,required:s,isRequired:d,isInvalid:c,isReadOnly:u,isDisabled:m,onFocus:x,onBlur:f,...p}=e,j=e["aria-describedby"]?[e["aria-describedby"]]:[];return(null==i?void 0:i.hasFeedbackText)&&(null==i?void 0:i.isInvalid)&&j.push(i.feedbackId),(null==i?void 0:i.hasHelpText)&&j.push(i.helpTextId),{...p,"aria-describedby":j.join(" ")||void 0,id:null!=r?r:null==i?void 0:i.id,isDisabled:null!=(n=null!=o?o:m)?n:null==i?void 0:i.isDisabled,isReadOnly:null!=(t=null!=a?a:u)?t:null==i?void 0:i.isReadOnly,isRequired:null!=(l=null!=s?s:d)?l:null==i?void 0:i.isRequired,isInvalid:null!=c?c:null==i?void 0:i.isInvalid,onFocus:(0,h.v0)(null==i?void 0:i.onFocus,x),onBlur:(0,h.v0)(null==i?void 0:i.onBlur,f)}}(e);return{...r,disabled:n,readOnly:l,required:i,"aria-invalid":(0,h.Qm)(t),"aria-required":(0,h.Qm)(i),"aria-readonly":(0,h.Qm)(l)}}(o),s=r?function(e,n=[]){let t=Object.assign({},e);for(let e of n)e in t&&delete t[e];return t}(t,E):t;return(0,l.jsx)(d.m.textarea,{ref:n,rows:r,...a,className:(0,h.cx)("chakra-textarea",i),__css:s})});G.displayName="Textarea";var A=e=>{let[n,t]=(0,a.useState)(""),[i,r]=(0,B.FV)(D),[o,s]=(0,B.FV)(R),d=e=>e+1,u=e=>{t(e.target.value)},m=()=>{n&&(s(d),r([{text:n,id:o,mode:e.whichMode},...i]),t(""))};return e.isTheMode?(0,l.jsxs)(C,{borderRadius:"xl",w:"fit-content",h:"fit-content",m:5,padding:"2",children:[(0,l.jsx)(c,{flexDir:"column"}),(0,l.jsx)(c,{flexDir:"column",alignItems:"center",children:(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m()},children:[(0,l.jsx)(G,{bgColor:"gray.200",borderRadius:"xl",w:"min",h:"20",marginBottom:"2",isRequired:!0,onChange:e=>u(e)}),(0,l.jsx)("br",{}),(0,l.jsx)(w,{type:"submit",w:"fit-content",bgColor:"gray.200",borderRadius:"xl",onSubmit:m,children:"Submit"})]})})]}):(0,l.jsx)("div",{})};let H=e=>{let n=JSON.stringify(e.opinions);fetch(e.targetURL,{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then(e=>e.json()).then(e=>{console.log("Success:",e)});let t="CBTSession_"+new Date().toISOString()+".json",l=new Blob([n],{type:"application/json"});return{link:URL.createObjectURL(l),fileName:t}};var z=()=>{var e,n,t,s,d,u;let m=function(e){let{theme:n}=(0,o.uP)(),t=(0,i.OX)();return(0,a.useMemo)(()=>(0,r.Cj)(n.direction,{...t}),[void 0,n.direction,t])}(),[h,f]=(0,a.useState)(0),[p,j]=(0,a.useState)(""),[g,v]=(0,B.FV)(D);return(0,l.jsxs)(c,{bgColor:"blackAlpha.100",flexDir:"column",w:"100%",h:"100%",overflow:"hidden",children:[(0,l.jsxs)(c,{textAlign:"center",w:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,l.jsx)(x,{size:"lg",textAlign:"center",fontStyle:"normal",fontWeight:"medium",m:"5",children:"Schemode: The virtual chair work"}),(0,l.jsx)(c,{flexDir:"row",children:(0,l.jsx)(w,{onClick:()=>{j(H({targetURL:"http://localhost:9000/api/v1/exportCBTSession",opinions:g}).fileName)},w:"20%",children:"Export Session Log"})}),p?(0,l.jsx)("a",{href:p,download:!0,children:"Download"}):(0,l.jsx)(b.$,{})]}),(0,l.jsx)(T,{mode:h}),(0,l.jsxs)(c,{flexDir:"row",alignItems:"stretch",children:[(0,l.jsxs)(C,{bgColor:"green.200",w:"30%",ml:"5",mr:"5",h:"65vh",borderRadius:"3xl",overflow:"auto",children:[(0,l.jsx)(x,{fontSize:"2xl",textAlign:"center",fontStyle:"normal",fontWeight:"medium",m:"4",children:"Healthy Adult Mode"}),(0,l.jsxs)(c,{flexDir:"row",m:"5",children:[(0,l.jsx)(k,{children:"Hi, I'm healthy adult mode!"}),(0,l.jsx)(N,{isTheMode:0==h})]}),(0,l.jsx)(F,{whichMode:0}),(0,l.jsx)(A,{whichMode:h,isTheMode:0==h})]}),(0,l.jsxs)(C,{bgColor:"yellow.100",w:"30%",ml:"5",mr:"5",h:"65vh",borderRadius:"3xl",children:[(0,l.jsx)(x,{fontSize:"2xl",textAlign:"center",fontStyle:"normal",fontWeight:"medium",m:"4",children:"Vulnerable Child Mode"}),(0,l.jsxs)(c,{flexDir:"row",m:"5",children:[(0,l.jsx)(k,{children:"I'm vulnerable child mode"}),(0,l.jsx)(N,{isTheMode:1==h})]}),(0,l.jsx)(F,{whichMode:1}),(0,l.jsx)(A,{whichMode:h,isTheMode:1==h})]}),(0,l.jsxs)(C,{bgColor:"red.100",w:"30%",ml:"5",mr:"5",h:"65vh",borderRadius:"3xl",overflow:"auto",scrollBehavior:"smooth",children:[(0,l.jsx)(x,{fontSize:"2xl",textAlign:"center",fontStyle:"normal",fontWeight:"medium",m:"4",children:"Dysfunctional Parent Mode"}),(0,l.jsxs)(c,{flexDir:"row",m:"5",children:[(0,l.jsx)(k,{children:"I'm dysfunctional Parent mode"}),(0,l.jsx)(N,{isTheMode:2==h})]}),(0,l.jsx)(F,{whichMode:2}),(0,l.jsx)(A,{whichMode:h,isTheMode:2==h})]})]}),(0,l.jsx)(c,{flexDir:"column",align:"center",w:"100vw",children:(0,l.jsx)(w,{m:"10",fontSize:"3xl",bgColor:"blue.200",w:"md",borderRadius:"2xl",onClick:()=>{var e;m({position:"bottom-left",render:()=>(0,l.jsx)(C,{color:"white",p:3,bg:"blue.300",borderRadius:"2xl",children:"Mode changed!!"}),title:"",description:"Changed to next mode.",status:"success",duration:4e3,isClosable:!0}),f((console.log(e=h),e>=2)?e=0:e+=1)},children:"Switch!!"})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);